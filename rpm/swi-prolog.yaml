Name: swi-prolog
Summary: Prolog Interpreter
Version: 5.6.50
Release: 0
Group: Development/Languages
License: LGPLv2.1
URL: http://www.swi-prolog.org/
Sources:
    # http://www.swi-prolog.org/download/stable/src/
    - "%{name}-%{version}.tar.gz"
    - "%{name}-rpmlintrc"
    - "update-index.sh"
Patches:
    - configure-in.patch
    - pkconfig.patch
    - 0001-FIXED-Bug-478-Possible-read-past-end-of-static-array.patch
    - 0002-FIXED-Bug-479-Writing-outside-allocated-array-in-PL_.patch
    - 0003-FIXED-Bug-480-Possible-memory-issue-with-error-messa.patch

Description: |
    ISO/Edinburgh-style Prolog compiler.  Compliant with Part 1 of the ISO standard
    for Prolog.  Covers all traditional Edinburgh Prolog features and shares many
    features with Quintus and SICStus Prolog, including a compatible module system.
    Very fast compiler, garbage collection (also on atoms), fast and powerful C/C++
    interface, autoloading, GNU-readline interface.
     
    SWI-Prolog has been designed and implemented such that it can easily be
    modified for experiments with logic programming and the relation
    between logic programming and other programming paradigms (such as the
    object oriented XPCE environment).  SWI-Prolog has a rich set of
    built-in predicates and reasonable performance, which makes it possible
    to develop substantial applications in it.  The current version offers
    a module system, garbage collection and an interface to the C language.

Provides:
    - pl

SetupOptions: -q -n %{name}-%{version}/swi-prolog

Configure: configure

ConfigOptions:
    - --with-world
    - --enable-shared
    - --without-clib
    - --disable-gmp
    - --disable-readline
    - --disable-curses
    - --without-chr
    - --without-clpqr
    - --without-cpp
    - --without-db
    - --without-mp
    - --without-nlp
    - --without-ssl
    - --without-odbc
    - --without-pldoc
    - --without-plunit
    - --without-zlib
    - --without-sgml
    - --without-semweb
    - --without-table
    - --without-http
    - --without-xpce
    - ARCH=%{_arch}
    - PL=swipl
Builder: none
SubPackages:
    - Name: runtime-lib
      Summary: SWI-Prolog runtime environment dynamic lib
      Group: System/Resource Policy
      Description: SWI-Prolog runtime environment dynamic lib.
      AutoDepend: false

    - Name: doc
      Summary: Documentation for SWI-Prolog
      Group: Documentation
      Description: This package contains SWI-Prolog documentation (manual pages, README, etc.).

    - Name: library-core
      Summary: Minimal library of SWI-Prolog predicates
      Group: System/Resource Policy
      Description: |
          This package contains a minimal collection of prolog predicates, just enough
          to load foreign libraries.
      AutoDepend: false
      RequiresPreUn:
          - "/bin/rm"
      RequiresPost:
          - "%{name} = %{version}"
      Obsoletes:
          - "%{name}-lib-core"


    - Name: library
      Summary: Library of SWI-Prolog predicates
      Group: Development/Languages
      Description: |
          This package contains a collection of commonly used prolog predicates. You
          need this is you are running non-precompiled prolog code.
      AutoDepend: false
      Requires:
          - "%{name}-library-core = %{version}"
      RequiresPost:
          - "%{name} = %{version}"
      RequiresPostUn:
          - "%{name} = %{version}"
      Obsoletes:
          - "%{name}-lib"


    - Name: devel
      Summary: Headers files and libraries for SWI-Prolog C-interface
      Group: Development/Libraries
      Description: |
          This package contains headers files, etc. necessary for developing software
          that uses the C-interface to SWI-Prolog.
      AutoDepend: false
      Requires:
          - "%{name}-runtime-lib = %{version}"
      Provides:
          - pl-devel
